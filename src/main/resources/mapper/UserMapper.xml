<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mpc.user.dao.UserRepository">
<!-- 회원정보 입력 insert  -->

<!-- (회원가입) 회원정보입력 insert문  -->
	<insert id="signup" parameterType="com.mpc.user.model.UserModel">
	<![CDATA[      
	INSERT INTO 
		mpc_user (userId
				,userPw
				,userName
				,userRegDate 
				,userNickname
				,userPhone
				,userPostNum
				,userAddress
				,userDetailAddress
				,userNo)
				
		VALUES(#{userId}
			  ,#{userPw}
			  ,#{userName}
			  ,SYSDATE
			  ,#{userPhone}
			  ,#{userPhone}
			  ,#{userPostNum}
			  ,#{userAddress}
			  ,#{userDetailAddress}
			  ,mpc_user_seq.NEXTVAL)
		 ]]>
	</insert>
	
	
<!-- id 중복 체크  -->
	<select id="idChk" parameterType="String" resultType="int">
	<![CDATA[
		select count(userId)
		from mpc_user 
		where  USERID = #{userId}
	]]>
	</select>
	
	
	<!-- 펫 정보등록  -->
 	 <insert id="petInsert" parameterType="com.mpc.user.model.PetModel">
	<![CDATA[      
	INSERT INTO 
				pet(petNo
				,userNo
				,petName
				,petFamilyDate 
				,petSpecies
				,petSex
				,petNeut
				,petCharacter)
				
		VALUES(pet_seq.NEXTVAL
			  ,42
			  ,#{petName}
			  ,#{petFamilyDate}
			  ,#{petSpecies}
			  ,#{petSex}
			  ,#{petNeut}
			  ,#{petCharacter})
		 ]]>
	</insert>  

	<select id="login" parameterType="com.mpc.user.model.UserModel" resultType="Int">
		<![CDATA[
        SELECT COUNT(*)
         FROM mpc_user
         WHERE userid = #{userid}
         AND userpw = #{userpw}
         ]]>
	</select>

	<select id="selectUserModel" parameterType="string" resultType="com.mpc.user.model.UserModel">
	<![CDATA[
		SELECT 
			*
		FROM 
			mpc_user 
		WHERE userId=#{userId}
	]]>
	</select>
	
	<select id="selectAllUserModel" resultType="com.mpc.user.model.UserModel">
	<![CDATA[
		SELECT 
			userId, UserName, userPw, userphone, useraddress 
		FROM
			mpc_user 
	]]>
	</select>
	
	<update id="updateUserModel" parameterType="com.mpc.user.model.UserModel">
	<![CDATA[
		UPDATE mpc_user
		SET 
			UserName=#{UserName}, userPw=#{userPw}, userphone=#{userphone} 
		WHERE 
			userId=#{userId}
	]]>
	</update>
	
	<delete id="deleteUserModel" parameterType="com.mpc.user.model.UserModel">
	<![CDATA[
		DELETE FROM
			mpc_user 
		WHERE
			userId=#{userId} AND userPw=#{userPw}
	]]>
	</delete>
	
	<select id="getPassword" parameterType="string" resultType="string">
	<![CDATA[
		SELECT
			userPw
		FROM
			mpc_user
		WHERE userId=#{userId}
	]]>
	</select>
	
</mapper>





